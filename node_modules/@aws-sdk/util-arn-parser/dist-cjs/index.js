"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.build = exports.parse = exports.validate = void 0;
const validate = (str) => typeof str === "string" && str.indexOf("arn:") === 0 && str.split(":").length >= 6;
exports.validate = validate;
const parse = (arn) => {
    const segments = arn.split(":");
    if (segments.length < 6 || segments[0] !== "arn")
        throw new Error("Malformed ARN");
    const [, partition, service, region, accountId, ...resource] = segments;
    return {
        partition,
        service,
        region,
        accountId,
        resource: resource.join(":"),
    };
};
exports.parse = parse;
const build = (arnObject) => {
    const { partition = "aws", service, region, accountId, resource } = arnObject;
    if ([service, region, accountId, resource].some((segment) => typeof segment !== "string")) {
        throw new Error("Input ARN object is invalid");
    }
    return `arn:${partition}:${service}:${region}:${accountId}:${resource}`;
};
exports.build = build;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBVU8sTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFRLEVBQVcsRUFBRSxDQUM1QyxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0FBRHhFLFFBQUEsUUFBUSxZQUNnRTtBQUs5RSxNQUFNLEtBQUssR0FBRyxDQUFDLEdBQVcsRUFBTyxFQUFFO0lBQ3hDLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEMsSUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbkYsTUFBTSxDQUNKLEFBREssRUFHTCxTQUFTLEVBQ1QsT0FBTyxFQUNQLE1BQU0sRUFDTixTQUFTLEVBQ1QsR0FBRyxRQUFRLENBQ1osR0FBRyxRQUFRLENBQUM7SUFFYixPQUFPO1FBQ0wsU0FBUztRQUNULE9BQU87UUFDUCxNQUFNO1FBQ04sU0FBUztRQUNULFFBQVEsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztLQUM3QixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBcEJXLFFBQUEsS0FBSyxTQW9CaEI7QUFPSyxNQUFNLEtBQUssR0FBRyxDQUFDLFNBQXVCLEVBQVUsRUFBRTtJQUN2RCxNQUFNLEVBQUUsU0FBUyxHQUFHLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsR0FBRyxTQUFTLENBQUM7SUFDOUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLEVBQUU7UUFDekYsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0tBQ2hEO0lBQ0QsT0FBTyxPQUFPLFNBQVMsSUFBSSxPQUFPLElBQUksTUFBTSxJQUFJLFNBQVMsSUFBSSxRQUFRLEVBQUUsQ0FBQztBQUMxRSxDQUFDLENBQUM7QUFOVyxRQUFBLEtBQUssU0FNaEIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIEFSTiB7XG4gIHBhcnRpdGlvbjogc3RyaW5nO1xuICBzZXJ2aWNlOiBzdHJpbmc7XG4gIHJlZ2lvbjogc3RyaW5nO1xuICBhY2NvdW50SWQ6IHN0cmluZztcbiAgcmVzb3VyY2U6IHN0cmluZztcbn1cbi8qKlxuICogVmFsaWRhdGUgd2hldGhlciBhIHN0cmluZyBpcyBhbiBBUk4uXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZSA9IChzdHI6IGFueSk6IGJvb2xlYW4gPT5cbiAgdHlwZW9mIHN0ciA9PT0gXCJzdHJpbmdcIiAmJiBzdHIuaW5kZXhPZihcImFybjpcIikgPT09IDAgJiYgc3RyLnNwbGl0KFwiOlwiKS5sZW5ndGggPj0gNjtcblxuLyoqXG4gKiBQYXJzZSBhbiBBUk4gc3RyaW5nIGludG8gc3RydWN0dXJlIHdpdGggcGFydGl0aW9uLCBzZXJ2aWNlLCByZWdpb24sIGFjY291bnRJZCBhbmQgcmVzb3VyY2UgdmFsdWVzXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZSA9IChhcm46IHN0cmluZyk6IEFSTiA9PiB7XG4gIGNvbnN0IHNlZ21lbnRzID0gYXJuLnNwbGl0KFwiOlwiKTtcbiAgaWYgKHNlZ21lbnRzLmxlbmd0aCA8IDYgfHwgc2VnbWVudHNbMF0gIT09IFwiYXJuXCIpIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBBUk5cIik7XG4gIGNvbnN0IFtcbiAgICAsXG4gICAgLy9Ta2lwIFwiYXJuXCIgbGl0ZXJhbFxuICAgIHBhcnRpdGlvbixcbiAgICBzZXJ2aWNlLFxuICAgIHJlZ2lvbixcbiAgICBhY2NvdW50SWQsXG4gICAgLi4ucmVzb3VyY2VcbiAgXSA9IHNlZ21lbnRzO1xuXG4gIHJldHVybiB7XG4gICAgcGFydGl0aW9uLFxuICAgIHNlcnZpY2UsXG4gICAgcmVnaW9uLFxuICAgIGFjY291bnRJZCxcbiAgICByZXNvdXJjZTogcmVzb3VyY2Uuam9pbihcIjpcIiksXG4gIH07XG59O1xuXG50eXBlIGJ1aWxkT3B0aW9ucyA9IE9taXQ8QVJOLCBcInBhcnRpdGlvblwiPiAmIHsgcGFydGl0aW9uPzogc3RyaW5nIH07XG5cbi8qKlxuICogQnVpbGQgYW4gQVJOIHdpdGggc2VydmljZSwgcGFydGl0aW9uLCByZWdpb24sIGFjY291bnRJZCwgYW5kIHJlc291cmNlcyBzdHJpbmdzXG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZCA9IChhcm5PYmplY3Q6IGJ1aWxkT3B0aW9ucyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHsgcGFydGl0aW9uID0gXCJhd3NcIiwgc2VydmljZSwgcmVnaW9uLCBhY2NvdW50SWQsIHJlc291cmNlIH0gPSBhcm5PYmplY3Q7XG4gIGlmIChbc2VydmljZSwgcmVnaW9uLCBhY2NvdW50SWQsIHJlc291cmNlXS5zb21lKChzZWdtZW50KSA9PiB0eXBlb2Ygc2VnbWVudCAhPT0gXCJzdHJpbmdcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnB1dCBBUk4gb2JqZWN0IGlzIGludmFsaWRcIik7XG4gIH1cbiAgcmV0dXJuIGBhcm46JHtwYXJ0aXRpb259OiR7c2VydmljZX06JHtyZWdpb259OiR7YWNjb3VudElkfToke3Jlc291cmNlfWA7XG59O1xuIl19